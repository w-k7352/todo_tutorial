# テスト仕様書

## 1. 単体テスト（ユニットテスト）

個々のモジュール（部品）が、独立して正しく動作することを確認する。

### 1.1. `utils.js`

| テストID | テスト対象 | テスト内容 | 期待される結果 |
| :--- | :--- | :--- | :--- |
| UT-001 | `formatDateTime` | ISO形式の日付文字列が渡された場合に、`YYYY-MM-DD HH:mm`形式の文字列に正しく変換されること。 | `2023-10-27 19:00`のようなフォーマットされた文字列が返却される。 |

### 1.2. `taskRepository.js`

| テストID | テスト対象 | テスト内容 | 期待される結果 |
| :--- | :--- | :--- | :--- |
| UT-002 | `add`, `getAll` | 新しいタスクオブジェクトを`add`で追加した後、`getAll`で取得した際に、追加したタスクが含まれていること。 | `getAll`が返す配列の長さが1になり、その要素が追加したタスクオブジェクトと等しい。 |
| UT-003 | `remove` | 2つのタスクを追加した後、片方のIDを指定して`remove`を実行した際に、指定したタスクのみが削除されること。 | `getAll`が返す配列の長さが1になり、残っている要素が削除しなかった方のタスクである。 |
| UT-004 | `getAll` | ストレージが空の状態で`getAll`を実行した際に、空の配列が返されること。 | 長さが0の空配列 `[]` が返却される。 |

---

## 2. 結合テスト（インテグレーションテスト）

複数のモジュールを組み合わせた際に、意図通りに連携して動作することを確認する。

### 2.1. タスク追加機能

| テストID | テスト対象 | テスト条件（準備） | 操作手順 | 期待される結果 |
| :--- | :--- | :--- | :--- | :--- |
| IT-001 | タスク追加の連携 | 1. HTMLが表示されている。<br>2. `TaskRepository.add`関数を監視（スパイ）する。 | 1. タスクタイトル入力欄に`Test Task 1`と入力する。<br>2. 「追加」ボタンをクリックする。 | `TaskRepository.add`関数が、`title`プロパティに`Test Task 1`を持つオブジェクトを引数として、1回だけ呼び出される。 |

---

## 3. E2Eテスト（エンドツーエンドテスト）

実際のユーザーとして、アプリケーション全体の機能が正しく動作することを確認する。

### 3.1. タスク追加シナリオ

| テストID | テスト対象シナリオ | 操作手順 | 期待される結果 |
| :--- | :--- | :--- | :--- |
| E2E-001 | タスクの新規追加 | 1. アプリケーションのページを開く。<br>2. タスクタイトル入力欄に「新しいE2Eタスク」と入力する。<br>3. 「追加」ボタンをクリックする。 | 画面のタスク一覧に、「新しいE2Eタスク」というタイトルのタスクが新たに行として表示される。 |